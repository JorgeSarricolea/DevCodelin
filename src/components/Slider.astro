---
import slides from '@js/slidesObject.js';
---

<div class="relative overflow-hidden w-full" id="slider-container">
  <div id="slider" class="whitespace-nowrap transition-all ease-linear">
    {slides.map((slide) => (
      <div class="inline-block w-full snap-start p-4">
        <div class="bg-white rounded-lg shadow p-5">
          <h3 class="text-lg font-bold">{slide.title}</h3>
          <p>{slide.description}</p>
        </div>
      </div>
    ))}
  </div>
  <div class="absolute bottom-0 left-0 right-0 flex justify-center p-4">
    {slides.map((_, index) => (
      <span class="mx-1 h-2 w-2 bg-gray-300 rounded-full inline-block" data-indicator={index}></span>
    ))}
  </div>
</div>

<script id="slides-data" type="application/json">
  {JSON.stringify(slides)}
</script>

<script type="module">
  window.addEventListener('load', () => {
    const slider = document.getElementById('slider');
    const slidesData = JSON.parse(document.getElementById('slides-data').textContent);
    let currentIndex = 0;
    const slidesCount = slidesData.length;
    const interval = 2000; // 2 segundos por slide
    let slideWidth = document.querySelector('#slider > div').offsetWidth;

    const indicators = document.querySelectorAll('[data-indicator]');
    indicators[currentIndex].classList.add('bg-gray-800');

    function updateSlider() {
      const offset = currentIndex * slideWidth;
      slider.style.transform = `translateX(-${offset}px)`;

      indicators.forEach((indicator, index) => {
        indicator.classList.toggle('bg-gray-800', index === currentIndex);
      });
    }

    setInterval(() => {
      currentIndex = (currentIndex + 1) % slidesCount;
      updateSlider();
    }, interval);
  });
</script>


