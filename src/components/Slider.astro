---
import slides from '@js/slidesObject.js';
---

<div id="indicators-carousel" class="relative w-full" data-carousel="static">
  <!-- Carousel wrapper -->
  <div class="relative h-56 overflow-hidden rounded-lg md:h-96">
      <!-- Carousel Items -->
      {slides.map((slide, index) => (
          <div class={`hidden duration-700 ease-in-out ${index === 0 ? 'block' : ''}`} data-carousel-item={index === 0 ? 'active' : ''}>
            <i class={`${slide.icon} text-primaryBackground`}></i>
            <h1>{slide.title}</h1>
            <h2>{slide.description}</h2>
          </div>
      ))}
  </div>
  <!-- Slider indicators -->
  <div class="absolute bg-grey z-30 flex -translate-x-1/2 space-x-3 rtl:space-x-reverse bottom-5 left-1/2">
      {slides.map((_, index) => (
          <button type="button" class={`w-3 h-3 rounded-full bg-grey ${index === 0 ? 'bg-grey' : 'bg-grey'}`} aria-current={index === 0} aria-label={`Slide ${index + 1}`} data-carousel-slide-to={index}></button>
      ))}
  </div>
  <!-- Slider controls -->
  <button type="button" class="absolute top-0 start-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-prev>
      <!-- Previous button icon -->
  </button>
  <button type="button" class="absolute top-0 end-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-next>
      <!-- Next button icon -->
  </button>
</div>

<script type="module">
  window.addEventListener('load', () => {
      const carousel = document.getElementById('indicators-carousel');
      const slides = Array.from(carousel.querySelectorAll('[data-carousel-item]'));
      const indicators = Array.from(carousel.querySelectorAll('[data-carousel-slide-to]'));
      const prevBtn = carousel.querySelector('[data-carousel-prev]');
      const nextBtn = carousel.querySelector('[data-carousel-next]');
      let currentIndex = 0;
      const slidesCount = slides.length;
      const interval = 2000; // 2 segundos por slide

      function updateCarousel() {
          slides.forEach((slide, index) => {
              slide.classList.toggle('hidden', index !== currentIndex);
          });

          indicators.forEach((indicator, index) => {
              indicator.classList.toggle('bg-gray', index !== currentIndex);
              indicator.classList.toggle('bg-secondary', index === currentIndex);
          });
      }

      function nextSlide() {
          currentIndex = (currentIndex + 1) % slidesCount;
          updateCarousel();
      }

      function prevSlide() {
          currentIndex = (currentIndex - 1 + slidesCount) % slidesCount;
          updateCarousel();
      }

      nextBtn.addEventListener('click', nextSlide);
      prevBtn.addEventListener('click', prevSlide);

      setInterval(nextSlide, interval);
  });
</script>
